# 企业级RAG系统 - 用户详细使用指南

## 📖 欢迎使用企业级RAG系统

欢迎使用企业级RAG系统！这是一款智能的企业知识管理和问答平台。通过上传您的文档，系统会自动建立智能索引，让您能够基于文档内容进行精准的语义检索和智能问答。

让我们开始使用吧！

---

## 🚀 快速开始

### 1. 注册账号

首次使用前，您需要注册一个账号：

1. 访问系统首页（如：http://120.48.89.60）
2. 点击右上角的"注册"按钮
3. 填写注册信息：
   - **用户名**: 3-50个字符，字母、数字、下划线
   - **邮箱**: 有效的邮箱地址
   - **密码**: 至少8个字符，建议包含大小写字母和数字
   - **姓名**: （可选）

4. 点击"注册"按钮完成注册
5. 系统会自动登录并跳转到首页

### 2. 上传您的第一个文档

1. 点击左侧菜单的"文档管理"
2. 点击"上传文档"按钮
3. 选择文件（支持：PDF、Word、TXT、Markdown、Excel）
4. 点击"确定"开始上传

**支持格式说明**:
- **PDF**: `.pdf`
- **Word文档**: `.docx`
- **文本文件**: `.txt`
- **Markdown**: `.md`
- **Excel**: `.xlsx`, `.xls`

**文件大小限制**: 最大50MB

### 3. 查看文档处理状态

上传后，系统会自动处理文档（解析内容、建立索引）。您可以在文档列表中查看处理状态：

- **processing**: 正在处理
- **indexed**: 已完成索引，可以用于搜索
- **error**: 处理失败（点击可查看错误信息）

处理时间取决于文件大小和内容复杂度，通常几秒到几分钟。

### 4. 开始智能对话

1. 点击左侧菜单的"智能对话"
2. 在输入框中输入您的问题
3. 点击"发送"按钮
4. 系统会基于您上传的文档生成回答

**示例问题**:
- "系统的主要功能是什么？"
- "如何上传文档？"
- "什么是RAG技术？"

---

## 📄 文档管理

### 上传文档

#### 支持的文件格式

| 格式 | 扩展名 | 说明 |
|------|--------|------|
| PDF | .pdf | 适合文档、手册、书籍 |
| Word | .docx | 适合Word文档 |
| 文本 | .txt | 纯文本文件 |
| Markdown | .md | 技术文档、笔记 |
| Excel | .xlsx, .xls | 表格数据 |

#### 上传步骤

1. 点击左侧菜单"文档管理"
2. 点击右上角"上传文档"按钮
3. 选择文件（单次只能上传一个）
4. 点击"确定"

#### 文档处理说明

上传后，系统会自动执行以下操作：

1. **文件存储**: 保存到服务器
2. **格式解析**: 提取文档内容
3. **文本分块**: 将文本分割成512字符的小块
4. **向量生成**: 使用百度千帆API生成向量
5. **索引存储**: 将向量存入Milvus数据库
6. **完成**: 文档标记为"已索引"

### 查看文档列表

在文档管理页面，您可以：

- **查看所有文档**: 包含已索引和处理中的文档
- **按状态筛选**: 选择"已索引"、"处理中"、"失败"
- **查看文档信息**:
  - 文件名
  - 文件大小
  - 分块数（chunk_count）
  - 字符数（total_chars）
  - 上传时间

### 搜索和筛选

使用顶部搜索框可以：

- **搜索文件名**: 输入文件名关键字
- **过滤状态**: 选择全部、已索引、处理中、失败

### 删除文档

⚠️ **注意**: 删除文档会同时删除：
- 服务器上的文件
- 向量库中的索引数据
- 相关搜索结果

删除步骤：

1. 找到要删除的文档
2. 点击右侧的"删除"按钮（🗑️图标）
3. 确认删除操作

**删除后无法恢复，请谨慎操作！**

### 文档统计

页面顶部显示文档统计信息：
- 总文档数
- 总分块数（chunk_count）
- 总文件大小

---

## 💬 智能对话

### 发起新对话

1. 点击左侧菜单"智能对话"
2. 在页面底部的输入框中输入问题
3. 点击"发送"按钮（或按Enter键）
4. 系统会返回AI回复

### 对话历史

系统会自动保存对话历史，您可以：

- 查看对话列表（智能对话页面）
- 打开历史对话继续交流
- 查看对话中的所有消息

### 回答来源

AI的回答会显示来源信息：

- **文件名**: 来自哪个文档
- **内容片段**: 文档中的相关段落
- **相似度**: 文档与问题的匹配程度（0-1，越高越相关）

### 对话技巧

#### 1. 使用具体问题

❌ **不好的提问方式**:
- "这个系统怎么用？"
- "文档里说了什么？"

✅ **好的提问方式**:
- "如何上传PDF文档？"
- "系统支持哪种向量数据库？"
- "长期记忆的过期时间是多少天？"

#### 2. 分步提问

如果问题比较复杂，可以分步骤提问：

```
Q1: 这个系统有哪些核心功能？
Q2: RAG技术如何工作？
Q3: 如何创建长期记忆？
```

#### 3. 使用上下文

系统会记住对话上下文，您可以引用之前的内容：

```
Q1: 刚才说的向量数据库是什么？
Q2: 这个向量数据库有什么优势？
Q3: 如何配置它？
```

#### 4. 指定文档范围

如果要限定搜索特定文档：

1. 在"文档管理"中选择文档
2. 点击"基于这些文档对话"
3. 系统会只在这些文档中搜索

### 高级选项

#### 温度调整（Temperature）

温度控制回答的随机性和创造性：

- **低温度（0.1-0.3）**: 回答更确定、更一致
- **中温度（0.4-0.7）**: 平衡确定性和创新性（推荐）
- **高温度（0.8-1.0）**: 回答更有创意，但可能不够准确

设置方法：

1. 点击"高级设置"
2. 调整"温度"滑块
3. 默认值为0.7

#### 用户提示（User Prompt）

您可以给系统提供额外的提示信息，帮助生成更精准的回答：

**示例**:
- "请用通俗易懂的语言回答"
- "请列举3个要点"
- "请提供具体的步骤"

#### 文档选择

点击"选择文档"可以选择特定的文档进行搜索：

- **全部文档**: 搜索所有已上传的文档
- **指定文档**: 勾选特定的文档

### 查看对话详情

点击对话列表中的对话，可以查看：

- **对话标题**
- **所有消息历史**
- **每条消息的回复时间**
- **AI回答的来源信息**

### 删除对话

1. 在对话列表中找到要删除的对话
2. 点击右侧的"删除"按钮（🗑️图标）
3. 确认删除

---

## 🧠 长期记忆

### 什么是长期记忆？

长期记忆系统会记住您的重要信息，让AI在后续对话中使用。

**适用场景**:
- 您的偏好设置（如"我喜欢详细的回答"）
- 重要的项目信息（如"项目X截止日期是6月30日"）
- 常用术语解释
- 工作流程说明

### 添加长期记忆

1. 点击左侧菜单"长期记忆"
2. 点击"添加记忆"按钮
3. 填写信息：
   - **内容**: 要记住的信息
   - **重要性**: 0.0 - 1.0（越高保存越久）
   - **分类**: general、user_pref、project、work等
   - **标签**: 添加多个标签，方便检索
4. 点击"保存"

#### 重要性说明

| 重要性 | 保存时间 | 适用场景 |
|--------|---------|---------|
| 0.9 - 1.0 | 6个月（180天） | 核心信息、永久偏好 |
| 0.8 - 0.9 | 3个月（90天） | 重要项目信息 |
| 0.7 - 0.8 | 1个月（30天） | 中等重要性信息 |
| 0.6 - 0.7 | 1周（7天） | 临时信息 |
| < 0.6 | 永不过期 | 重要的配置信息 |

#### 分类建议

- **general**: 通用信息
- **user_pref**: 用户偏好（如回答风格、格式要求）
- **project**: 项目相关信息（如项目名称、里程碑）
- **work**: 工作相关（如常用流程、联系人信息）

### 检索长期记忆

在长期记忆页面，您可以：

- **查看所有记忆**: 按重要性降序排列
- **搜索记忆**: 使用关键词搜索
- **按分类筛选**: 选择特定的分类
- **按重要性筛选**: 设置最小重要性值

搜索示例：
- 输入"项目" → 找到所有包含"项目"的记忆
- 选择分类"user_pref" → 只看用户偏好
- 设置最小重要性0.6 → 只保留重要记忆

### 编辑和删除记忆

#### 编辑记忆

1. 找到要编辑的记忆
2. 点击"编辑"按钮（✏️图标）
3. 修改内容、重要性、分类或标签
4. 点击"保存"

#### 删除记忆

1. 找到要删除的记忆
2. 点击"删除"按钮（🗑️图标）
3. 确认删除

### 记忆的自动过期

系统会根据重要性自动清理过期记忆：

- 过期后记忆会标记为不活跃（不显示）
- 不会真正删除数据，可手动恢复
- 可以在设置中关闭自动过期

---

## ⚙️ 用户设置

### 个人信息

在"用户设置"页面，您可以：

- **查看个人信息**: 用户名、邮箱、姓名
- **修改姓名**: 点击"编辑"按钮
- **修改密码**（如果功能已启用）

### 偏好设置

#### 回答风格

- **简单**: 简洁的回答
- **详细**: 详细的解释和举例
- **专业**: 专业的术语和格式

#### 显示设置

- **每页显示的对话数**: 10、20、50
- **是否显示来源**: 显示/隐藏AI回答的来源

### 通知设置

（此功能为预留，未来版本可能支持）

---

## 🎯 使用场景示例

### 场景1: 企业员工培训手册

**目标**: 让新员工快速查询培训手册内容

**操作步骤**:
1. 上传公司培训手册（PDF或Word文档）
2. 新员工提问：
   - "公司的报销流程是什么？"
   - "年假如何申请？"
   - "如何使用公司的VPN？"
3. AI会自动从手册中提取答案并回复

### 场景2: 产品文档查询

**目标**: 让销售和客服快速查找产品信息

**操作步骤**:
1. 上传产品手册、技术规格、FAQ文档
2. 问题示例：
   - "产品X的电池续航时间是多久？"
   - "这个产品支持哪些操作系统？"
   - "如何重置设备？"
3. AI会基于文档给出准确答案

### 场景3: 法律政策文档

**目标**: 快速查询法律政策规定

**操作步骤**:
1. 上传法律法规、公司政策文档
2. 问题示例：
   - "劳动法关于加班费的规定是什么？"
   - "公司的请假政策是什么？"
   - "数据安全合规有哪些要求？"
3. AI会引用具体条款回答

### 场景4: 技术资料管理

**目标**: 团队共享技术资料和知识库

**操作步骤**:
1. 上传技术文档、API文档、架构设计文档
2. 添加长期记忆：
   - 内容: "我们的API基础URL是 https://api.example.com/v1"
   - 重要性: 0.9
   - 分类: project
3. 开发人员可以快速查询技术问题

---

## 💡 使用技巧

### 1. 文档组织建议

- **按主题分组**: 不同项目或主题使用不同文档
- **定期清理**: 删除过时和不需要的文档
- **命名规范**: 使用清晰的文件名（如"产品A用户手册_v2.0.pdf"）

### 2. 优化搜索结果

- **使用具体关键词**: 避免"这个"、"那些"等模糊词
- **包含上下文**: 在提问中提供必要的背景信息
- **分步提问**: 复杂问题拆分成多个简单问题

### 3. 长期记忆管理

- **重要信息高优先级**: 核心信息设置重要性>0.8
- **及时更新**: 过期信息及时删除或修改
- **合理分类**: 使用分类和标签便于检索

---

## ⚠️ 注意事项

### 数据安全

- **不要上传敏感信息**: 如个人信息、密码、机密文档
- **定期备份**: 重要文档做好备份
- **账号安全**: 定期更换密码，不要泄露给他人

### 使用限制

- **文件大小**: 单个文件最大50MB
- **并发请求**: 避免同时上传多个大文件
- **API额度**: 注意百度千帆API的使用额度

### 系统性能

- **处理时间**: 大文件处理可能需要几分钟
- **搜索速度**: 文档越多，搜索越慢，建议定期清理
- **浏览器缓存**: 定期清除浏览器缓存以获得最佳体验

---

## ❓ 常见问题 (FAQ)

### Q1: 为什么上传后文档一直是"处理中"状态？

A: 文档处理需要时间，特别是大文件或PDF文档，可能需要几分钟。请耐心等待。如果超过10分钟仍是"处理中"，请联系管理员。

### Q2: 为什么搜索没有结果？

A: 可能的原因：
- 文档还未处理完成（检查状态是否为"已索引"）
- 搜索关键词与文档内容不匹配
- 相似度阈值设置过高

### Q3: AI回答不准确怎么办？

A: 建议：
- 使用更具体的问题
- 减少问题的范围
- 使用"用户提示"功能提供更多背景
- 检查是否上传了相关文档

### Q4: 可以上传多少个文档？

A: 理论上没有限制，但建议：
- 定期清理不需要的文档
- 不要上传重复文档
- 单用户建议控制在1000个以内以保持最佳性能

### Q5: 长期记忆会自动删除吗？

A: 会。系统会根据重要性自动过期：
- 重要性>0.9: 6个月自动过期
- 重要性>0.8: 3个月自动过期
- 重要性>0.7: 1个月自动过期
- 重要性<0.6: 永不过期

### Q6: 可以批量上传文档吗？

A: 当前版本不支持批量上传，需要逐个上传。未来版本可能会支持批量上传。

### Q7: 可以导出对话记录吗？

A: 当前版本不支持导出，但您可以通过复制文本的方式保存。未来版本可能会支持导出功能。

### Q8: 系统支持哪些语言？

A: 系统基于百度千帆API，主要支持中文，也支持英文的初步支持。

---

## 🆘 获取帮助

如果您遇到问题或需要帮助，可以通过以下方式：

1. **查看文档**: 首先查看本文档和其他相关文档
2. **联系管理员**: 联系您的系统管理员
3. **提Issue**: 如果代码问题，可在GitHub提交Issue
4. **查阅API文档**: 访问 `http://your-domain.com:8000/docs` 查看API文档

---

## 📚 更多资源

- **架构与功能介绍**: 查看系统详细架构和功能说明
- **部署指南**: 了解如何部署系统
- **API文档**: RESTful API接口文档

---

**文档版本**: 1.0.0
**最后更新**: 2026-02-23
**作者**: 李祯（小龙龙AI工作室）
**系统版本**: Enterprise RAG System v1.0.0
